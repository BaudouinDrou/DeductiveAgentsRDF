<!doctype html>
<!--[if lt IE 7 ]> <html class="no-js ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]>    <html class="no-js ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]>    <html class="no-js ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
  <meta charset="utf-8">

  <!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame
       Remove this if you use the .htaccess -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <title>rdfstore-js</title>
  <meta name="author" content="Antonio Garrote">

  <link rel="stylesheet" href="./css/style.css">

  <!-- All JavaScript at the bottom, except for Modernizr which
  enables HTML5 elements & feature detects -->
  <script type='text/javascript' src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
  <script type='text/javascript' src='./js/jquery-ui.min.js'></script>
  <script type='text/javascript' src='http://ajax.aspnetcdn.com/ajax/jquery.templates/beta1/jquery.tmpl.js'></script>
  <script type='text/javascript' src='./js/rdf_store.js'></script>
</head>
    <body>
        <header>
          <h1>Interpretation test</h1>
        </header>
        <section id="content">
          <div id="target">
          </div>
        </section>
        <footer>
        
        </footer>
        <script type='text/javascript'>
          jQuery(document).ready(function(){
            new rdfstore.Store(function(store) {
              // the new store is ready
              var storeURI = "<./rdf/testing.ttl>"; // store location
              store.execute("LOAD " + storeURI, function(success, result) {
                // data from the specified location is loaded
                var p1;
                if (success) {
                  console.log('Finished!');
                  p1 = $('<p>Loading Finished with success</p>');
                } else {
                  p1 = $('<p>Loading Finished with error</p>');
                  console.log('Error occured!');
                }
                $("#target").append(p1);
                $("#target").append($('<p>Result of loading : ' + result + '</p>'));
                console.log('Results of loading : ' + result);
                
                // Testing with a standard query 
                // store.execute("SELECT * { ?s ?p ?o }", function(succes,result) {
                //  console.log("Succes Query : " + succes);
                //  console.log(result.counts);
                // });
                store.execute("SELECT * FROM " + storeURI + "{ ?s ?p ?o }", function(success, results){
                  if(success) {

                    console.log("Success : " + results);
                    // process results        
/*                    if(results[0].s.token === 'uri') {
                      $("#target").append($('<p>Value of the subject from the first triple : ' + results[0].s.value + '</p>'));
                      console.log(results[0].s.value);
                    }*/
                    for(i = 0; i<results.length; ++i){
                      if(results[i].s.token === 'uri') {
                        $("#target").append($('<p>Value of the subject from the triple #' + i + ' : ' + results[i].s.value + '</p>'));
                        console.log(results[0].s.value);
                      }
                    }    
                  }
                });
              });
            });
          });
        </script>
    </body>
</html>
